/******/ (function() { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};
// // Import vendor jQuery plugin example
// import '~/app/libs/mmenu/dist/mmenu.js'

document.addEventListener('DOMContentLoaded', function () {
  // Custom JS
  mobMenuToggle();
  stickyHeader();
  worksSlider();
  scrollNavbar();
  smoothScroll();
});
var wow = new WOW({
  boxClass: 'wow',
  // default
  animateClass: 'animated',
  // default
  offset: 0,
  // default
  mobile: true,
  // default
  live: true // default
});

window.addEventListener("load", function () {
  wow.init();
  hideLoader();
});
function hideLoader() {
  var loader = document.querySelector('.loader');
  loader.style.display = 'none';
}

// мобильное меню
function mobMenuToggle() {
  var btn = document.querySelector('.header__navigation-btn-menu');
  var menu = document.querySelector(btn.dataset.toggle);
  var header = document.querySelector('.header');
  btn.addEventListener('click', function (e) {
    btn.classList.toggle('active');
    menu.classList.toggle('active');
    header.classList.toggle('active');
  });
  menu.addEventListener('click', function (e) {
    if (e.target.tagName === 'A') {
      btn.classList.remove('active');
      menu.classList.remove('active');
      header.classList.remove('active');
    }
  });
}
function stickyHeader() {
  var header = document.querySelector('.header');
  if (document.body.getBoundingClientRect().top < 0) {
    header.classList.add('sticky');
  } else {
    header.classList.remove('sticky');
  }
  document.addEventListener('scroll', function () {
    if (document.body.getBoundingClientRect().top < 0) {
      header.classList.add('sticky');
    } else {
      header.classList.remove('sticky');
    }
  });
}
function smoothScroll() {
  var linkNav = document.querySelectorAll('[href^="#"]');
  var headerHeight = document.querySelector('.header').getBoundingClientRect().height;
  var V = 0.2;
  for (var i = 0; i < linkNav.length; i++) {
    linkNav[i].addEventListener('click', function (e) {
      //по клику на ссылку
      e.preventDefault(); //отменяем стандартное поведение
      var w = window.pageYOffset; // производим прокрутка прокрутка
      var hash = this.href.replace(/[^#]*(.*)/, '$1');
      var tar = document.querySelector(hash); // к id элемента, к которому нужно перейти
      var t = tar.getBoundingClientRect().top - headerHeight;
      var start = null;
      requestAnimationFrame(step); // подробнее про функцию анимации [developer.mozilla.org]
      function step(time) {
        if (start === null) {
          start = time;
        }
        var progress = time - start,
          r = t < 0 ? Math.max(w - progress / V, w + t) : Math.min(w + progress / V, w + t);
        window.scrollTo(0, r);
        if (r != w + t) {
          requestAnimationFrame(step);
        } else {
          location.hash = hash; // URL с хэшем
        }
      }

      if (t > 1 || t < -1) {
        requestAnimationFrame(step);
      }
    });
  }
}
function scrollNavbar() {
  // Получаем все элементы блоков и элементы навигации

  var navItems = document.querySelectorAll('#primary-menu a');
  // Замените '.nav-item' на ваш класс элементов навигации
  var blocks = getBlocks(); // Замените '.block' на ваш класс блоков
  var blocksPosition = getBlocksPositions();
  var currentPosition = [blocksPosition[0], blocksPosition[1]];
  function getBlocksPositions() {
    var positions = [];
    blocks.forEach(function (item, index) {
      positions.push(item.offsetTop);
    });
    return positions;
  }
  function getBlocks() {
    var blocks = [];
    navItems.forEach(function (item, index) {
      blocks.push(document.querySelector(item.getAttribute('href')));
    });
    return blocks;
  }

  // Функция, которая определяет, находится ли элемент в зоне видимости экрана
  function isElementInViewport(el, ind, pos) {
    return pos >= el && pos < (blocksPosition[ind + 1] || document.documentElement.getBoundingClientRect().height);
  }

  // Функция, которая добавляет класс активного элемента навигации
  function setActiveNavItem() {
    var documentPosition = Math.abs(document.documentElement.getBoundingClientRect().top) + document.querySelector('.header').getBoundingClientRect().height + 1;
    if (documentPosition > currentPosition[0] && documentPosition < currentPosition[1]) return;
    blocksPosition.forEach(function (block, index) {
      if (isElementInViewport(block, index, documentPosition)) {
        currentPosition[0] = block;
        currentPosition[1] = blocksPosition[index + 1];
        navItems.forEach(function (navItem) {
          navItem.parentElement.classList.remove('active'); // Удаляем класс активного элемента навигации у всех элементов
        });

        navItems[index].parentElement.classList.add('active'); // Добавляем класс активного элемента навигации соответствующему блоку
      }
    });
  }

  // Событие скрола
  window.addEventListener('scroll', setActiveNavItem);
  setActiveNavItem();
}
function worksSlider() {
  var swiper = new Swiper(".works-slider", {
    slidesPerView: 3,
    spaceBetween: 30,
    noSwiper: false,
    speed: 400,
    autoHeight: true,
    navigation: {
      nextEl: ".works-button-next",
      prevEl: ".works-button-prev"
    },
    pagination: {
      el: ".works-pagination",
      type: "fraction"
    },
    // Responsive breakpoints   
    breakpoints: {
      // when window width is <= 320px     
      320: {
        slidesPerView: 1,
        spaceBetween: 15
      },
      // when window width is <= 480px     
      480: {
        slidesPerView: 2,
        spaceBetween: 20
      },
      // when window width is <= 640px     
      992: {
        slidesPerView: 3,
        spaceBetween: 30
      }
    }
  });
}
/******/ })()
;